// ===== METADATA: One entry per episode =====
// You'll fill date/actresses later â€” URL is left blank for now
const episodesData = [
  // JinriCP S1
  { show: "JinriCP", season: 1, episode: 1, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 2, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 3, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 4, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 5, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 6, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 7, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 8, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 9, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 10, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 11, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 12, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 13, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 14, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 15, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 16, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 17, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 18, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 19, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 1, episode: 20, date: "", actresses: [], url: "" },

  // JinriCP S2
  { show: "JinriCP", season: 2, episode: 1, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 2, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 3, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 4, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 5, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 6, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 7, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 8, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 9, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 10, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 11, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 12, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 13, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 14, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 15, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 16, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 17, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 18, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 19, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 2, episode: 20, date: "", actresses: [], url: "" },

  // JinriCP S3
  { show: "JinriCP", season: 3, episode: 1, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 2, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 3, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 4, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 5, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 6, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 7, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 8, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 9, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 10, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 11, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 12, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 13, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 14, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 15, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 16, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 17, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 18, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 19, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 3, episode: 20, date: "", actresses: [], url: "" },

  // JinriCP S4
  { show: "JinriCP", season: 4, episode: 1, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 2, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 3, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 4, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 5, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 6, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 7, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 8, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 9, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 10, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 11, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 12, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 13, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 14, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 15, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 16, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 17, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 18, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 19, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 4, episode: 20, date: "", actresses: [], url: "" },

  // JinriCP S5
  { show: "JinriCP", season: 5, episode: 1, date: "", actresses: ["éŸ©å®è´ ì§„ë¦¬ì˜ë² ì´ë¹„ double101",
  "å´æ™ºæž— ì˜¤ì§€ë¦¼ 100472",
"å…ƒè·å¨œ ì›í•˜ë‚˜ o111na",
"å°é±¼äºº ìŠ¹ìŠ¹ìŠ¹ gkfnsus5573",
"Eli ì—˜ë¦¬ eli05021212",
"æ£‰èŠ± ì´íƒœë¦¬ naras2",
"éŸ©å½©é›… í•œì±„ì•„ qwer00725",
"å´”è‰ºå¦® ìµœì˜ˆë‹ˆ anystar00",
"Lorins ë¡œë¦°ìŠ¤ lorins2002",
"åˆç‘ ì´ˆë¡±ì´ green10004",
"æƒ ç‘ž í•´ì„œ imanatural",
"æŽå°å¨œ ì´ì†Œë‚˜ hanyura282",
"è·æ‹‰ í•˜ë¼ lotus82",
"SSO ì˜ sos282",
"å°¹è¯—æ© ìœ¤ì‹œì€ riwon1004",
"æŽæ—¶åª› ì´ì‹œì› kyh0301052",
"äº‘è‹± ìœ¤ìž‰ sasa0516",
"æµ·å§¬ í•´ì°Œ velyvely777"], url: "https://jiercp.com/s5/?/%E7%AC%AC%E4%BA%94%E5%AD%A3%E7%AC%AC01%E6%9C%9F20250602/" },
  { show: "JinriCP", season: 5, episode: 2, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 3, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 4, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 5, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 6, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 7, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 8, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 9, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 10, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 11, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 12, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 13, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 14, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 15, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 16, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 17, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 18, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 19, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 5, episode: 20, date: "", actresses: [], url: "" },

  // JinriCP S6
  { show: "JinriCP", season: 6, episode: 1, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 2, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 3, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 4, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 5, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 6, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 7, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 8, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 9, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 10, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 11, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 12, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 13, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 14, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 15, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 16, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 17, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 18, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 19, date: "", actresses: [], url: "" },
  { show: "JinriCP", season: 6, episode: 20, date: "", actresses: [], url: "" },

  // PandaClass S1
{ show: "PandaClass", season: 1, episode: 1, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 2, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 3, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 4, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 5, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 6, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 7, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 8, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 9, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 10, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 11, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 12, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 13, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 14, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 15, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 16, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 17, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 18, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 19, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 1, episode: 20, date: "", actresses: [], url: "" },

// PandaClass S2
{ show: "PandaClass", season: 2, episode: 1, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 2, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 3, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 4, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 5, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 6, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 7, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 8, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 9, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 10, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 11, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 12, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 13, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 14, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 15, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 16, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 17, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 18, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 19, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 2, episode: 20, date: "", actresses: [], url: "" },

// PandaClass S3
{ show: "PandaClass", season: 3, episode: 1, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 2, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 3, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 4, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 5, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 6, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 7, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 8, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 9, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 10, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 11, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 12, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 13, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 14, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 15, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 16, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 17, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 18, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 19, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 3, episode: 20, date: "", actresses: [], url: "" },

// PandaClass S4
{ show: "PandaClass", season: 4, episode: 1, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 2, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 3, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 4, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 5, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 6, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 7, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 8, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 9, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 10, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 11, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 12, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 13, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 14, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 15, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 16, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 17, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 18, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 19, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 4, episode: 20, date: "", actresses: [], url: "" },

// PandaClass S5
{ show: "PandaClass", season: 5, episode: 1, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 2, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 3, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 4, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 5, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 6, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 7, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 8, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 9, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 10, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 11, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 12, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 13, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 14, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 15, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 16, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 17, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 18, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 19, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 5, episode: 20, date: "", actresses: [], url: "" },

// PandaClass S6
{ show: "PandaClass", season: 6, episode: 1, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 2, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 3, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 4, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 5, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 6, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 7, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 8, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 9, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 10, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 11, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 12, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 13, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 14, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 15, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 16, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 17, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 18, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 19, date: "", actresses: [], url: "" },
{ show: "PandaClass", season: 6, episode: 20, date: "", actresses: [], url: "" }
];

// For brevity in this response, I'll assume you'll expand the list.
// Just duplicate the above block and change "JinriCP" â†’ "PandaClass" for S1â€“S6.

// ===== APP LOGIC =====
const viewContainer = document.getElementById('viewContainer');
const filterBar = document.getElementById('actressFilterBar');
const backButton = document.getElementById('backButton');

let navigationStack = [];
const shows = [...new Set(episodesData.map(e => e.show))];
const allActresses = [...new Set(episodesData.flatMap(e => e.actresses))].sort();

// ===== NAVIGATION =====
function pushState(state) {
  navigationStack.push(state);
  backButton.classList.toggle('visible', navigationStack.length > 0);
}

function goBack() {
  if (navigationStack.length === 0) return;
  const state = navigationStack.pop();
  backButton.classList.toggle('visible', navigationStack.length > 0);

  if (state === 'shows') {
    renderShowList();
  } else if (state.startsWith('show|')) {
    const show = state.split('|')[1];
    renderSeasonList(show);
  } else if (state.startsWith('season|')) {
    const [_, show, season] = state.split('|');
    renderEpisodeList(show, Number(season));
  }
}

// ===== RENDER =====
function renderShowList() {
  viewContainer.innerHTML = '<h2 class="view-title">Shows</h2>';
  const grid = document.createElement('div');
  grid.className = 'grid';
  shows.forEach(show => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="card-img" style="background:#333;display:flex;align-items:center;justify-content:center;color:#999">${show}</div>
      <div class="card-title">${show}</div>
    `;
    card.addEventListener('click', () => {
      pushState('shows');
      renderSeasonList(show);
    });
    grid.appendChild(card);
  });
  viewContainer.appendChild(grid);
}

function renderSeasonList(show) {
  const seasons = [...new Set(
    episodesData.filter(e => e.show === show).map(e => e.season)
  )].sort((a, b) => a - b);

  viewContainer.innerHTML = `<h2 class="view-title">${show}</h2>`;
  const grid = document.createElement('div');
  grid.className = 'grid';
  seasons.forEach(season => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="card-img" style="background:#444;display:flex;align-items:center;justify-content:center;color:#aaa">Season ${season}</div>
      <div class="card-title">Season ${season}</div>
    `;
    card.addEventListener('click', () => {
      pushState(`show|${show}`);
      renderEpisodeList(show, season);
    });
    grid.appendChild(card);
  });
  viewContainer.appendChild(grid);
}

function renderEpisodeList(show, season) {
  const episodes = episodesData
    .filter(e => e.show === show && e.season === season)
    .sort((a, b) => a.episode - b.episode);

  viewContainer.innerHTML = `<h2 class="view-title">${show} â€” Season ${season}</h2>`;
  const grid = document.createElement('div');
  grid.className = 'grid';
  episodes.forEach(ep => {
    const card = document.createElement('div');
    card.className = 'card';
    const imgPath = `/${show}/Season ${ep.season}/Episode ${String(ep.episode).padStart(2, '0')}/thumb.jpg`;
    card.innerHTML = `
      <img class="card-img" src="${imgPath}" alt="Ep ${ep.episode}" onerror="this.style.display='none';this.parentElement.style.backgroundColor='#333'">
      <div class="card-title">Ep ${ep.episode}</div>
    `;
    card.addEventListener('click', () => {
      // ðŸ”— Redirect to episode URL (you'll fill this in metadata)
      if (ep.url) {
        window.open(ep.url, '_blank');
      } else {
        alert(`URL not set for ${ep.show} S${ep.season}E${ep.episode}`);
      }
    });
    grid.appendChild(card);
  });
  viewContainer.appendChild(grid);
}

// ===== FILTERING =====
function applyActressFilter(actress) {
  const filtered = episodesData.filter(e => e.actresses.includes(actress));
  const grouped = {};
  filtered.forEach(e => {
    const key = `${e.show}|${e.season}`;
    if (!grouped[key]) grouped[key] = [];
    grouped[key].push(e);
  });

  viewContainer.innerHTML = `<h2 class="view-title">Episodes with: ${actress}</h2>`;
  const grid = document.createElement('div');
  grid.className = 'grid';
  Object.entries(grouped).forEach(([key, eps]) => {
    const ep = eps[0];
    const card = document.createElement('div');
    card.className = 'card';
    const imgPath = `/${ep.show}/Season ${ep.season}/Episode ${String(ep.episode).padStart(2, '0')}/thumb.jpg`;
    card.innerHTML = `
      <img class="card-img" src="${imgPath}" alt="${ep.show} S${ep.season}E${ep.episode}" onerror="this.style.display='none';this.parentElement.style.backgroundColor='#333'">
      <div class="card-title">${ep.show} S${ep.season}E${ep.episode}</div>
    `;
    card.addEventListener('click', () => {
      if (ep.url) {
        window.open(ep.url, '_blank');
      } else {
        alert(`URL not set for ${ep.show} S${ep.season}E${ep.episode}`);
      }
    });
    grid.appendChild(card);
  });
  viewContainer.appendChild(grid);
}

function clearFilter() {
  navigationStack = [];
  backButton.classList.remove('visible');
  renderShowList();
}

function updateFilterBar() {
  filterBar.innerHTML = '';
  const clearBtn = document.createElement('div');
  clearBtn.className = 'filter-tag';
  clearBtn.textContent = 'â† All Shows';
  clearBtn.addEventListener('click', clearFilter);
  filterBar.appendChild(clearBtn);

  const currentActresses = [...new Set(episodesData.flatMap(e => e.actresses))].sort();
  currentActresses.forEach(actress => {
    const tag = document.createElement('div');
    tag.className = 'filter-tag';
    tag.textContent = actress;
    tag.addEventListener('click', () => applyActressFilter(actress));
    filterBar.appendChild(tag);
  });
}

// ===== INIT =====
updateFilterBar();
renderShowList();
